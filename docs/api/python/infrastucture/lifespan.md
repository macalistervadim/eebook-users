# Application Lifespan

Модуль `lifespan.py` управляет жизненным циклом приложения, обеспечивая корректную инициализацию и освобождение ресурсов при запуске и завершении работы.

## Основные компоненты

### `lifespan(app: FastAPI) -> AsyncGenerator[None, None]`
Асинхронный контекстный менеджер, управляющий жизненным циклом приложения.

**Параметры:**
- `app`: Экземпляр FastAPI приложения

**Функциональность:**
1. **При старте:**
   - Вызывает `bootstrap()` для инициализации приложения
   - Логирует успешный запуск

2. **При завершении:**
   - Освобождает ресурсы движка базы данных
   - Логирует завершение работы

## Пример использования

```python
from fastapi import FastAPI
from src.infrastructure.lifespan import lifespan

app = FastAPI(lifespan=lifespan)
```

## Особенности

- **Асинхронная работа**: Использует `asynccontextmanager` для асинхронного управления контекстом
- **Безопасное завершение**: Гарантирует освобождение ресурсов при любом сценарии завершения
- **Логирование**: Ведет логи ключевых событий жизненного цикла

## Требования

- FastAPI с поддержкой lifespan-событий
- Инициализированный движок базы данных

::: src.infrastructure.lifespan
    options:
      heading_level: 2
      show_source: true
