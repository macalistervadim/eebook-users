# Доменная модель пользователя

Модуль `domain.model` содержит ядро бизнес-логики приложения, реализуя паттерн "Богатая модель" (Rich Domain Model). Основной класс `User` инкапсулирует всю логику работы с пользователями.

## Особенности

- Четкое разделение ответственности
- Инкапсуляция бизнес-правил
- Независимость от инфраструктурного кода
- Поддержка иммутабельности где это необходимо
- Строгая типизация

## Документация API

### Класс User

Основная сущность, представляющая пользователя в системе.

::: src.domain.model.User
    options:
      show_source: true
      show_signature_annotations: true
      show_docstring: true
      show_bases: true
      show_root_heading: false
      show_root_toc_entry: false

## Примеры использования

### Создание пользователя

```python
from uuid import uuid4
from datetime import datetime, UTC
from src.adapters.hasher import BcryptPasswordHasher
from src.domain.model import User

# Инициализация зависимостей
hasher = BcryptPasswordHasher()

# Создание нового пользователя
user = User(
    user_id=uuid4(),
    first_name="Иван",
    last_name="Иванов",
    email="ivan@example.com",
    username="ivanov",
    hashed_password=hasher.hash_password("secure_password"),
    _hasher=hasher,
    is_active=True,
    created_at=datetime.now(UTC)
)
```

### Работа с пользователем

```python
# Активация/деактивация
user.activate()
user.deactivate()

# Верификация email
user.verify_email()

# Проверка пароля
if user.verify_password("my_password"):
    print("Пароль верный")

# Обновление пароля
user.set_password("new_secure_password")

# Обновление времени последнего входа
user.update_login_time()
```

## Рекомендации по использованию

1. **Создание пользователей**
   - Всегда используйте фабричные методы или сервисный слой
   - Убедитесь, что пароль хешируется до сохранения
   - Генерируйте уникальные ID для пользователей

2. **Безопасность**
   - Никогда не храните пароли в открытом виде
   - Используйте надежные алгоритмы хеширования
   - Регулярно обновляйте учетные данные пользователей

3. **Валидация**
   - Проверяйте email на корректность
   - Валидируйте сложность пароля
   - Ограничивайте длину строковых полей

4. **Тестирование**
   - Используйте моки для зависимостей
   - Тестируйте граничные случаи
   - Проверяйте бизнес-правила

## Интеграция

Доменная модель `User` может быть использована с:

- Репозиториями для хранения данных
- Сервисным слоем для бизнес-логики
- API-контроллерами для обработки запросов
- Системами аутентификации и авторизации

## Ограничения

- Требует инициализации с валидным хешером паролей
- Не содержит валидации ввода (должна выполняться на уровне приложения)
- Не зависит от фреймворков и внешних библиотек, кроме стандартной библиотеки Python
